"use strict";(self.webpackChunkscnsoft_website=self.webpackChunkscnsoft_website||[]).push([[9438],{32688:(t,e,i)=>{var s=i(4002),r=i.n(s),a=i(29884),p=i(31955),o=i(79184),n=i(61165),u=i(12155),d=i(144);function h(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}r()(document).ready((()=>{r()(".exit-popup").each(((t,e)=>new l(r()(e))))}));class l{constructor(t){h(this,"TYPE_EXIT_POPUP","exit_popup"),h(this,"TYPE_PAGE_POPUP","page_popup"),h(this,"PAGE_POPUP_PAGE_TYPES",["Service Description","Info-Commercial Page","Product Description"]),this.$wrapper=t,this.popupType=this.$wrapper.data("type"),this.$form=this.$wrapper.find(".ep-form"),this.$result=this.$wrapper.find(".ep-result"),this.$submitBtn=this.$wrapper.find(".ep-form-submit-btn"),this.formValidation=new n.Z(this.$form),this.trackSource=this.$form.closest("[data-track-source]").data("track-source"),editmode&&this.initPopupImg(),this.$wrapper.removeClass("d-none"),this.initShowPopupHandler(),this.$wrapper.on("click",this.handleClickOutsideOfPopup.bind(this)),this.$wrapper.find(".ep-close-btn, .ep-result-button").on("click",this.closePopup.bind(this)),this.$submitBtn.on("click",this.handleClickSubmitBtn.bind(this)),this.$form.on("load-gdpr",this.handleLoadGdpr.bind(this))}async initShowPopupHandler(){editmode||isMobile()||p.Z.get("disableExitPopup")||p.Z.get("submittedForm")||(this.popupType===this.TYPE_EXIT_POPUP&&setTimeout((()=>{this.handleMouseoutEventFunc=this.handleMouseoutEvent.bind(this),document.addEventListener("mouseout",this.handleMouseoutEventFunc)}),5e3),this.popupType===this.TYPE_PAGE_POPUP&&this.PAGE_POPUP_PAGE_TYPES.includes(pageType)&&d.default.addListener((()=>{if(d.default.pageEngagementTimeSeconds>=5&&d.default.maxScrollPercent>=90){if(p.Z.get("disableExitPopup"))return!0;if(p.Z.set("disableExitPopup",!0,1),!p.Z.get("submittedForm"))return this.showPopup(),!0}})))}handleMouseoutEvent(t){t.toElement||t.relatedTarget||t.clientY>=10||a.Z.getTabsCount()>1||(document.removeEventListener("mouseout",this.handleMouseoutEventFunc),p.Z.get("disableExitPopup")||(p.Z.set("disableExitPopup",!0,1),p.Z.get("submittedForm")||this.showPopup()))}handleClickSubmitBtn(t){t.preventDefault(),(0,o.$I)(this.$submitBtn,"Click",null,{forceTrackGtag:!1,forceAddDelay:!1}),this.formValidation.validate()&&(this.$submitBtn.addClass("disabled"),(0,u.Z)(this.$form,{success:()=>{this.$form.addClass("d-none"),this.$result.removeClass("d-none"),this.popupType===this.TYPE_EXIT_POPUP&&(0,o.L9)("Site","form for ","Conversion","Submitted",{trackGtag:!0})},error:t=>{this.$submitBtn.removeClass("disabled"),this.formValidation.placeServerErrors(t)}}))}handleClickOutsideOfPopup(t){t.target===t.currentTarget&&(this.closePopup(),(0,o.L9)(this.$wrapper.data("track-source"),"outside","Popup","Click"))}async showPopup(){this.$wrapper.addClass("active");let t=await this.initPopupImg();t&&t[0].svgatorPlayer.ready((t=>t.play())),this.popupType===this.TYPE_EXIT_POPUP&&(0,o.L9)(this.$wrapper.data("track-source"),"popup","Exit Popup","Displayed"),this.popupType===this.TYPE_PAGE_POPUP&&(0,o.L9)(this.$wrapper.data("track-source"),"popup","Page Popup","Displayed")}async initPopupImg(){let t=this.$wrapper.find(".ep-img-wrapper"),e=t.data("img"),i=t.find("svg");if(!e)return null;if(i.length)return i;let s=await fetch(e),r=await s.text();return t.html(r),t.find("svg")}closePopup(){this.$wrapper.removeClass("active")}handleLoadGdpr(){editmode||(this.$wrapper.addClass("form-with-gdpr"),this.$form.find(".form-textarea-wrapper textarea").attr("data-max-rows",3),this.$form.find(".form-textarea-wrapper textarea").attr("rows",3))}}}},t=>{t.O(0,[3913,1955,6669,7731,9184,144,8536,2155,1165,9884],(()=>{return e=32688,t(t.s=e);var e}));t.O()}]);