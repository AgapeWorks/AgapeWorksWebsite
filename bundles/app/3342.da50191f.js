"use strict";(self.webpackChunkscnsoft_website=self.webpackChunkscnsoft_website||[]).push([[3342],{63342:(e,t,i)=>{i.r(t),i.d(t,{default:()=>l});var s=i(4002),a=i.n(s),r=i(79184),n=i(75959),o=i(39144),d=i(77347);class l{constructor(e){this.$wrapper=a()(e),this.$wrapper.closest(".pimcore_area_service-variations").next().hasClass("pimcore_area_service-variations")&&this.$wrapper.css({marginBottom:0,paddingBottom:0}),this.initItemGroups(),this.setEqualHeightFields(),this.addDescriptionAddition(),this.initHoverHintItems(),(0,o.Z)((()=>this.setEqualHeightFields())),this.$wrapper.find("img").one("load",(()=>this.setEqualHeightFields(["logo","description"]))),this.$wrapper.on("click",".btn-expand",this.handleClickExpandBtn.bind(this)).on("click",".sv-item-description-addition",this.handleClickExpandBtn.bind(this))}initItemGroups(){let e=new Map,t=+this.$wrapper.find(".sv-items").data("per-row");this.$wrapper.find(".sv-item-wrapper:not(.d-none) .sv-item:not(.sv-item-cta)").each(((i,s)=>{let r=Math.floor(i/t),n=e.get(r)?e.get(r):[];n.push(a()(s)),e.set(r,n)})),this.itemGroups=Array.from(e.values())}setEqualHeightFields(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["logo","title","description"];if(editmode)return;for(let t of e)this.$wrapper.find(`.sv-item-${t}`).css("height","auto");if(a()(document).width()<=767)return;let t=[];for(let i of e)for(let e of this.itemGroups){"description"===i&&(e=e.filter(((e,t)=>!a()(t).hasClass("expanded"))));let s=0;for(let t of e)s=Math.max(s,t.find(`.sv-item-${i}`).height());s&&t.push((()=>{e.forEach((e=>e.find(`.sv-item-${i}`).height(s)))}))}t.forEach((e=>e()))}addDescriptionAddition(){this.$wrapper.find(".sv-item.expand-item").each(((e,t)=>{let i=a()(t).find(".sv-item-description > *:first").prop("tagName"),s=a()('<div class="sv-item-description-addition"></div>');i&&"ul"===i.toLowerCase()&&s.addClass("first-ul"),s.insertAfter(a()(t).find(".sv-item-description"))}))}handleClickExpandBtn(e){if(e.preventDefault(),editmode)return;let t=a()(e.currentTarget),i=t.closest(".sv-item"),s=i.find(".sv-item-description");if(s.css("height","auto"),i.toggleClass("expanded"),i.hasClass("expanded")){s.css("max-height",s[0].scrollHeight+30);const e=d.default.getAdditionalAttributeIds(t);(0,r.$I)(t,"Click",null,{forcePersonalizationData:d.default.generatePersonalizationData("editable_sv_expand_click",e)})}else s.css("max-height",""),this.setEqualHeightFields(),(0,r.$I)(t,"Click")}initHoverHintItems(){this.$wrapper.find(".sv-item.hover-hint-item").filter((function(){return a()(this).data("hover-hint-message")})).length;this.$wrapper.find(".sv-item.hover-hint-item").each(((e,t)=>{let i=a()(t),s=null;i.hover((()=>{s=setTimeout((()=>i.addClass("active-hover-hint-item")),5e3)}),(()=>{clearTimeout(s),i.removeClass("active-hover-hint-item")})),i.on("click",(()=>{if(i.hasClass("active-hover-hint-item")){let e=i.data("hover-hint-message");e?n.default.openLivechat(`${e}`):n.default.openLivechat("");let t=i.find(".sv-item-title").text().trim();(0,r.L9)("Editable: Service Variations","card",t,"open livechat",{trackGtag:!0})}else i.addClass("active-hover-hint-item")}))}))}}}}]);