"use strict";(self.webpackChunkscnsoft_website=self.webpackChunkscnsoft_website||[]).push([[6803],{84485:(s,e,t)=>{var i=t(4002),n=t.n(i),a=t(75959),o=t(31955),r=t(42797),h=t(79184);function d(s,e,t){return e in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}n()(document).ready((()=>{if(!editmode&&+o.Z.get("own_with_intercom_sent_message"))return void a.default.onLoad((()=>Intercom("update",{hide_default_launcher:!1})));const s=n()(".own-with-intercom-snippet");editmode&&!s.closest(".snippet-content.editmode").length||(editmode?window.OwnWithIntercom=new p(s):a.default.onLoad((()=>window.OwnWithIntercom=new p(s))))}));class p{constructor(s){d(this,"MESSAGE_SHOW_TIME",500),d(this,"disableCollapse",!1),d(this,"animationStarted",!1),d(this,"shownMessageCount",0),d(this,"readMessageCount",0),this.$snippet=s,this.$wrapper=this.$snippet.find(".owis-wrapper"),this.$container=this.$wrapper.find(".ows-container"),this.$sendBtn=this.$wrapper.find(".owis-send-btn"),this.$itemsContainer=this.$wrapper.find(".owis-items-container"),this.$unread=this.$wrapper.find(".owis-unread"),this.$input=this.$wrapper.find(".owis-input[name]"),this.unredCount=0,this.itemsCount=this.$wrapper.find(".owis-message-wrapper").length,this.startDelay=+this.$wrapper.data("start-delay"),this.typingDelay=+this.$wrapper.data("typing-delay"),this.typingTime=+this.$wrapper.data("typing-time");const e=window.location.pathname,t=o.Z.get("own_with_intercom_save_minimized"),i=void 0===t?0:+t,a="Contact Page"===pageType||e.endsWith("calculator")||e.endsWith("configurator");!editmode&&(a||i||this.$wrapper.hasClass("use-owis-minimized"))&&(this.$wrapper.addClass("owis-minimized"),a&&this.$wrapper.addClass("owis-no-worry-user")),n()("body").addClass("hide-intercom"),this.$snippet.removeClass("hidden"),editmode?this.$wrapper.find(".owis-hidden-wrapper:not(.owis-typing-wrapper)").addClass("active"):(this.setShownMessageCount(),this.setReadMessageCount(),setTimeout((()=>{!this.animationStarted&&!this.disableCollapse&&this.initAnimation()}),this.shownMessageCount<this.itemsCount?this.startDelay:300),this.$wrapper.one("click",(()=>!this.animationStarted&&this.initAnimation())),this.$input.on("keypress",this.handleInputKeyup.bind(this)),this.$sendBtn.click(this.sendEnteredMessage.bind(this)),this.$wrapper.find(".owis-close-btn").click(this.closeChat.bind(this)),this.$wrapper.click(this.handleClickChat.bind(this)))}setShownMessageCount(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===s){const s=o.Z.get("own_with_intercom_shown_messages");this.shownMessageCount=void 0===s?0:+s}else this.shownMessageCount=s,o.Z.set("own_with_intercom_shown_messages",s)}setReadMessageCount(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===s){const s=o.Z.get("own_with_intercom_read_messages");this.readMessageCount=void 0===s?0:+s}else this.readMessageCount=s,o.Z.set("own_with_intercom_read_messages",s)}handleInputKeyup(s){13!==s.keyCode||s.shiftKey||(s.preventDefault(),this.sendEnteredMessage())}async initAnimation(){this.animationStarted=!0,this.$wrapper.removeClass("cursor-pointer");const s=this.$wrapper.find(".owis-typing-wrapper, .owis-minimized-typing-wrapper");this.$wrapper.find(".owis-items-wrapper, .owis-form-wrapper").addClass("active");let e=null,t=0;for(let i of this.$wrapper.find(".owis-message-wrapper")){const a=t<this.shownMessageCount,o=t<this.readMessageCount;a||(e&&await(0,r.Z)(this.typingDelay),s.addClass("active"),await(0,r.Z)(this.typingTime));const h=n()(i);s.removeClass("active"),h.addClass("active"),o||this.disableCollapse&&!this.$wrapper.hasClass("owis-minimized")||(this.unredCount+=1,(e||this.$wrapper.hasClass("owis-minimized"))&&(this.$unread.text(this.unredCount),this.$unread.addClass("active"))),!this.disableCollapse&&e&&this._collapseMessage(h,e,t),e=h,t++,t>this.shownMessageCount&&(this.setShownMessageCount(t),this.disableCollapse&&this.setReadMessageCount(this.shownMessageCount))}}_collapseMessage(s,e,t){this.$itemsContainer.css("paddingBottom",8*t+"px"),e.css({opacity:"0",transition:`all ${.75*this.MESSAGE_SHOW_TIME}ms ease-in-out`}),s.css({position:"absolute","z-index":"30",top:"0",transition:`all ${.5*this.MESSAGE_SHOW_TIME}ms ease-in-out`}),setTimeout((()=>{s.attr("style",""),e.css({position:"absolute",height:"32px",bottom:8*(t-1)+"px",transform:`scale(${1-.02*(this.itemsCount-t)})`,opacity:1-(this.itemsCount-t)/this.itemsCount,transition:"none"}),e.find(".owis-message").css("opacity","0")}),.8*this.MESSAGE_SHOW_TIME)}closeChat(){this.$wrapper.addClass("owis-minimized"),this.$wrapper.removeClass("owis-opened"),this.disableCollapse=!1,o.Z.set("own_with_intercom_save_minimized",1)}handleClickChat(s){if(n()(s.target).closest(".owis-close-btn").length)return;this.openChat();const e=(n()(s.target).closest("[class]").attr("class")+"").split(" ").filter((s=>(s+"").includes("owis")))[0];(0,h.L9)(this.$snippet.data("track-source"),"element",`${e||"chat window"}`,"Click chat",{trackGtag:!0})}openChat(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!this.animationStarted)return this.disableCollapse=!0,this.initAnimation(),void setTimeout((()=>this.openChat(s)),1e3);this.$wrapper.removeClass("owis-minimized"),this.$wrapper.addClass("owis-opened"),this.$wrapper.find(".owis-message-wrapper, .owis-items-container, .owis-message").attr("style",""),this.$itemsContainer.removeClass("cursor-pointer"),this.unredCount=0,this.setReadMessageCount(this.shownMessageCount),this.$unread.removeClass("active"),this.disableCollapse=!0,o.Z.set("own_with_intercom_save_minimized",0),"string"==typeof s&&this.$input.val(s).focus(),this.$input.attr("rows",1),n()("body").trigger("own-with-intercom_open")}sendEnteredMessage(){var s;const e=this.$input.val(),t=((null===(s=this.$wrapper.find(".owis-message-wrapper.active").last())||void 0===s?void 0:s.text())+"").trim();e&&(this.$sendBtn.addClass("disabled"),this.$wrapper.addClass("animate-pulse pointer-events-none"),a.default.onLoad((()=>{n().ajax({url:"/ajax/intercom-new-message",data:{user_id:Intercom("getVisitorId"),message:e},success:s=>{n()("body").removeClass("hide-intercom"),o.Z.set("own_with_intercom_sent_message",1,{expires:365}),Intercom("update",{hide_default_launcher:!1,answeredQuestion:t}),this.$wrapper.addClass("hidden"),window.OwnWithIntercom=null,setTimeout((()=>{s.conversationId?Intercom("showConversation",s.conversationId):Intercom("showNewMessage",e)}),1e3)}})})))}}}},s=>{s.O(0,[3913,1955,9184,8329,5959,7430,6547,2797],(()=>{return e=84485,s(s.s=e);var e}));s.O()}]);